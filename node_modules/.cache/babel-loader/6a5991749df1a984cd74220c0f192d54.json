{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Kaustubh/Projects/Personal/kaustubh-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/Kaustubh/Projects/Personal/kaustubh-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/Kaustubh/Projects/Personal/kaustubh-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Kaustubh/Projects/Personal/kaustubh-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from\"react\";import initialData from\"../../data/stats/site\";import Table from\"./Table\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Stats=function Stats(){var _useState=useState(initialData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setResponseData=_useState2[1];// TODO think about persisting this somewhere\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,resData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.github.com/repos/mldangelo/personal-site\");case 2:res=_context.sent;_context.next=5;return res.json();case 5:resData=_context.sent;setResponseData(initialData.map(function(field){return _objectSpread(_objectSpread({},field),{},{// update value if value was returned by call to github\nvalue:Object.keys(resData).includes(field.key)?resData[field.key]:field.value});}));case 7:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(function(){fetchData();},[fetchData]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Some stats about this site\"}),/*#__PURE__*/_jsx(Table,{data:data})]});};export default Stats;","map":{"version":3,"sources":["C:/Users/Kaustubh/Projects/Personal/kaustubh-website/src/components/Stats/Site.js"],"names":["React","useCallback","useEffect","useState","initialData","Table","Stats","data","setResponseData","fetchData","fetch","res","json","resData","map","field","value","Object","keys","includes","key"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,QAAxC,KAAwD,OAAxD,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,cAAgCH,QAAQ,CAACC,WAAD,CAAxC,wCAAOG,IAAP,eAAaC,eAAb,eACA;AACA,GAAMC,CAAAA,SAAS,CAAGR,WAAW,sEAAC,yKAEVS,CAAAA,KAAK,CACrB,sDADqB,CAFK,QAEtBC,GAFsB,qCAKNA,CAAAA,GAAG,CAACC,IAAJ,EALM,QAKtBC,OALsB,eAM5BL,eAAe,CACbJ,WAAW,CAACU,GAAZ,CAAgB,SAACC,KAAD,wCACXA,KADW,MAEd;AACAC,KAAK,CAAEC,MAAM,CAACC,IAAP,CAAYL,OAAZ,EAAqBM,QAArB,CAA8BJ,KAAK,CAACK,GAApC,EACHP,OAAO,CAACE,KAAK,CAACK,GAAP,CADJ,CAEHL,KAAK,CAACC,KALI,IAAhB,CADa,CAAf,CAN4B,sDAAD,GAe1B,EAf0B,CAA7B,CAiBAd,SAAS,CAAC,UAAM,CACdO,SAAS,GACV,CAFQ,CAEN,CAACA,SAAD,CAFM,CAAT,CAIA,mBACE,oCACE,kDADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAEF,IAAb,EAFF,GADF,CAMD,CA9BD,CAgCA,cAAeD,CAAAA,KAAf","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport initialData from \"../../data/stats/site\";\r\nimport Table from \"./Table\";\r\n\r\nconst Stats = () => {\r\n  const [data, setResponseData] = useState(initialData);\r\n  // TODO think about persisting this somewhere\r\n  const fetchData = useCallback(async () => {\r\n    // request must be authenticated if private\r\n    const res = await fetch(\r\n      \"https://api.github.com/repos/mldangelo/personal-site\"\r\n    );\r\n    const resData = await res.json();\r\n    setResponseData(\r\n      initialData.map((field) => ({\r\n        ...field,\r\n        // update value if value was returned by call to github\r\n        value: Object.keys(resData).includes(field.key)\r\n          ? resData[field.key]\r\n          : field.value,\r\n      }))\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  return (\r\n    <div>\r\n      <h3>Some stats about this site</h3>\r\n      <Table data={data} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Stats;\r\n"]},"metadata":{},"sourceType":"module"}